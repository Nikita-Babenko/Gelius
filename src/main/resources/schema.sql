DROP TABLE IF EXISTS CLIENTS;
DROP TABLE IF EXISTS PRODUCTS;
DROP TABLE IF EXISTS ORDERS;
DROP TABLE IF EXISTS REQUESTS;


CREATE TABLE CLIENTS (
  CLIENTS_ID   BIGINT NOT NULL AUTO_INCREMENT,
  ADDRESS      VARCHAR(200),
  COMPANY_NAME VARCHAR(50) NOT NULL,
  DESCRIPTION  VARCHAR(255),
  FIRST_NAME   VARCHAR(30),
  LAST_NAME    VARCHAR(30),
  PHONE_NUMBER VARCHAR(20) NOT NULL,
  PRIMARY KEY (CLIENTS_ID)
);

CREATE TABLE PRODUCTS (
  ID            BIGINT NOT NULL AUTO_INCREMENT,
  ACTIVITY      CHAR(1),
  COLOUR        VARCHAR(30),
  GRADE         VARCHAR(20),
  INNER_HEIGHT  INT(11),
  INNER_LENGTH  INT(11),
  INNER_WIDTH   INT(11),
  PRINT         VARCHAR(30),
  PRODUCTS_NAME VARCHAR(200),
  PRODUCTS_TYPE VARCHAR(50),
  PROFILE       VARCHAR(10),
  CLIENTS_ID     BIGINT,
  PRIMARY KEY (ID),
  FOREIGN KEY (CLIENTS_ID) REFERENCES CLIENTS (CLIENTS_ID)
);


CREATE TABLE ORDERS (
  ID         BIGINT      NOT NULL AUTO_INCREMENT,
  CLIENTS_ID BIGINT      NOT NULL,
  SHIP_DATE  DATETIME    NOT NULL,
  STATUS     VARCHAR(20) NOT NULL,
  CONSTRAINT FK_ORDERS_CLIENTS FOREIGN KEY (CLIENTS_ID)
  REFERENCES CLIENTS (CLIENTS_ID),
  PRIMARY KEY (ID)
);

CREATE TABLE REQUESTS (
  ID             BIGINT       NOT NULL AUTO_INCREMENT,
  ORDER_ID       BIGINT       NOT NULL,
  PRODUCTS_LIST  VARCHAR(160) NOT NULL,
  READINESS_DATE DATETIME     NOT NULL,
  PRIMARY KEY (ID),
  CONSTRAINT FK_REQUESTS_ORDERS FOREIGN KEY (ORDER_ID) REFERENCES ORDERS (ID),
);

CREATE TABLE REQUESTS_PRODUCTS (
  REQUESTS_ID BIGINT NOT NULL,
  PRODUCTS_ID BIGINT NOT NULL,
  PRIMARY KEY (REQUESTS_ID, PRODUCTS_ID),
  CONSTRAINT REQUESTS_PRODUCTS_1 FOREIGN KEY (REQUESTS_ID) REFERENCES REQUESTS (ID)
    ON DELETE CASCADE,
  CONSTRAINT REQUESTS_PRODUCTS_2 FOREIGN KEY (PRODUCTS_ID) REFERENCES PRODUCTS (ID)
    ON DELETE CASCADE
)

